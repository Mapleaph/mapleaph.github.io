
<!DOCTYPE html>
<html lang="zh-CN">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="DreamLand">
    <title>Archives - DreamLand</title>
    <meta name="author" content="Michael Wu">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="DreamLand">
<meta property="og:url" content="http://yoursite.com/archives/page/3/index.html">
<meta property="og:site_name" content="DreamLand">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DreamLand">
<meta name="twitter:creator" content="@mapleaph">
    
    
        
    
    
        <meta property="og:image" content="http://yoursite.com/assets/images/avatar.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-du2xmrqdqrl2ollgeiw050kpl6l4nbyz7bumjuurjgsxyopifvukebxc9lqe.min.css">
    <!--STYLES END-->
    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">DreamLand</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="/assets/images/avatar.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Michael Wu</h4>
                
                    <h5 class="sidebar-profile-bio"><p>author.bio</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="Home"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="Categories"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="Tags"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="Archives"
                        >
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                            title="Search"
                        >
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="About"
                        >
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/mapleaph" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://twitter.com/mapleaph" target="_blank" rel="noopener" title="Twitter">
                    
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/mapleaph@gmail.com"
                            title="Mail"
                        >
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2015/11/21/Proftpd/">
                            Proftpd
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2015-11-21T22:26:58+08:00">
	
		    11月 21, 2015
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Techniques/">Techniques</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install proftpd</span><br><span class="line"><span class="comment"># choose standalone mode</span></span><br></pre></td></tr></table></figure>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/proftpd/proftpd.conf</span><br><span class="line"></span><br><span class="line">1. change ServerName to your specified name</span><br><span class="line">2. uncomment DefaultRoot ~ to jail all users to their homes</span><br><span class="line"><span class="comment"># following is an example, we want /ftp_pool/pub to be the home directory of the ftp server.</span></span><br><span class="line"><span class="comment"># so you should ensure that the permission of the /ftp_pool/pub is 777.</span></span><br><span class="line">&lt;Anonymous /ftp_pool/pub&gt;</span><br><span class="line">   User                     ftp</span><br><span class="line">   Group                    ftp</span><br><span class="line">   <span class="comment"># We want clients to be able to login with "anonymous" as well as "ftp"</span></span><br><span class="line">   UserAlias                anonymous ftp</span><br><span class="line">   <span class="comment"># Cosmetic changes, all files belongs to ftp user</span></span><br><span class="line">   DirFakeUser  on ftp</span><br><span class="line">   DirFakeGroup on ftp</span><br><span class="line">   RequireValidShell        off</span><br><span class="line">   <span class="comment"># Limit the maximum number of anonymous logins</span></span><br><span class="line">   MaxClients               10</span><br><span class="line">   <span class="comment"># We want 'welcome.msg' displayed at login, and '.message' displayed</span></span><br><span class="line">   <span class="comment"># in each newly chdired directory.</span></span><br><span class="line">   DisplayLogin             welcome.msg</span><br><span class="line">   DisplayChdir             .message</span><br><span class="line">   <span class="comment"># Limit WRITE everywhere in the anonymous chroot</span></span><br><span class="line">   &lt;Directory *&gt;</span><br><span class="line">     &lt;Limit WRITE&gt;</span><br><span class="line">        AllowAll <span class="comment"># currently, all users can download and upload anything.</span></span><br><span class="line">     &lt;/Limit&gt;</span><br><span class="line">   &lt;/Directory&gt;</span><br><span class="line">&lt;/anonymous&gt;</span><br></pre></td></tr></table></figure>

                    
                        

                    
                    
                        <p>
                            <a href="/2015/11/21/Proftpd/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2015/11/21/Things-Need-to-Know-about-Git/">
                            Git
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2015-11-21T22:22:53+08:00">
	
		    11月 21, 2015
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Techniques/">Techniques</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>Git 是基于分支概念的</p>
<p><strong>所有的版本控制系统，都只能跟踪文本文件（也就是说，不能是）的内容变化，像图片，视频，word 文档这些二进制文件，版本控制系统只能记录下文件大小的变化，不能跟踪内容。</strong></p>
<h2 id="版本回退后的撤销"><a href="#版本回退后的撤销" class="headerlink" title="版本回退后的撤销"></a>版本回退后的撤销</h2><p><strong>要点</strong></p>
<p>要有 commit_id 就能回到对应的版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br></pre></td></tr></table></figure>
<h2 id="标签的使用"><a href="#标签的使用" class="headerlink" title="标签的使用"></a>标签的使用</h2><p>标签的作用，即为某个我们认为具有特殊意义的提交创建一个别名指针（如：v1.0），这样，该提交就可以很方便的被我们定位，而不需要记住它的 commit_id（如：efa123f）试想一下，那会有多难。</p>
<h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">为最新的提交打标签</span><br><span class="line">$ git tag v1.0</span><br><span class="line"></span><br><span class="line">为指定提交打标签</span><br><span class="line">$ git tag v1.0 &lt;commit_id&gt;</span><br><span class="line"></span><br><span class="line">打标签并附带说明文字</span><br><span class="line">$ git tag -a v1.0 -m <span class="string">"descriptions"</span></span><br><span class="line"></span><br><span class="line">附加 GPG 私钥签名（需要安装 GPG）</span><br><span class="line">$ git tag -s v1.0 &lt;commit_id&gt;</span><br><span class="line"></span><br><span class="line">将指定标签推送到远程仓库</span><br><span class="line">$ git push origin v1.0</span><br><span class="line"></span><br><span class="line">(上方对比分支推送)</span><br><span class="line">($ git push -u origin master)</span><br><span class="line"></span><br><span class="line">将所有标签推送到远程仓库</span><br><span class="line">$ git push origin -- tags</span><br></pre></td></tr></table></figure>
<h3 id="显示"><a href="#显示" class="headerlink" title="显示"></a>显示</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">显示左右标签，按字母顺序排序</span><br><span class="line">$ git tag</span><br><span class="line"></span><br><span class="line">显示标签详情</span><br><span class="line">$ git show v1.0</span><br></pre></td></tr></table></figure>
<h3 id="删除指定标签"><a href="#删除指定标签" class="headerlink" title="删除指定标签"></a>删除指定标签</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">在没推送到远程仓库的情况下删除</span><br><span class="line">$ git tag -d v1.0</span><br><span class="line"></span><br><span class="line">同时删除本地和远程仓库标签</span><br><span class="line">$ git tag -d v1.0</span><br><span class="line">$ git push origin :refs/tags/v1.0</span><br></pre></td></tr></table></figure>
<h2 id="让-git-status-支持中文字符"><a href="#让-git-status-支持中文字符" class="headerlink" title="让 git status 支持中文字符"></a>让 git status 支持中文字符</h2><p>如果使用 UTF-8 字符集</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.quotepath <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>如果使用 GBK 字符集</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global i18n.logOutputEncoding gbk</span><br><span class="line">git config --global i18n.commitEncoding gbk</span><br></pre></td></tr></table></figure>
<h2 id="git-diff-对象解读"><a href="#git-diff-对象解读" class="headerlink" title="git diff 对象解读"></a>git diff 对象解读</h2><ol>
<li><p>100644 表示普通文件</p>
</li>
<li><p>100755 表示可执行文件</p>
</li>
<li><p>120000 表示符号链接</p>
</li>
</ol>
<h2 id="Submodule"><a href="#Submodule" class="headerlink" title="Submodule"></a>Submodule</h2><h3 id="在当前工程中添加-Submodule"><a href="#在当前工程中添加-Submodule" class="headerlink" title="在当前工程中添加 Submodule"></a>在当前工程中添加 Submodule</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule add https://github.com/xxx/xyz.git xyz</span><br><span class="line">$ git add xyz .gitmodules</span><br><span class="line">$ git commit -m <span class="string">'add submodule xzy'</span></span><br><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure>
<h3 id="Clone-一个带有-Submodule-的工程"><a href="#Clone-一个带有-Submodule-的工程" class="headerlink" title="Clone 一个带有 Submodule 的工程"></a>Clone 一个带有 Submodule 的工程</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/yyy/abc.git; <span class="built_in">cd</span> abc</span><br><span class="line"><span class="comment"># 这时候可以看到 abc 目录中有 xyz 子目录，但是这个子目录是空的，我们需要手动进行 Submodule 初始化来获取内容</span></span><br><span class="line">$ git submodule init</span><br><span class="line">$ git submodule update</span><br></pre></td></tr></table></figure>
<h2 id="git-服务器搭建"><a href="#git-服务器搭建" class="headerlink" title="git 服务器搭建"></a>git 服务器搭建</h2><p>服务器端的配置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># make sure that the git's ssh permission is correct.</span></span><br><span class="line">git@xxx$ chmod 700 /home/git/.ssh</span><br><span class="line">git@xxx$ chown git:git /home/git/.ssh</span><br><span class="line">git@xxx$ chmod 644 /home/git/.ssh/authorized_keys</span><br><span class="line">git@xxx$ chown git:git /home/git/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装必要组件</span></span><br><span class="line">$ sudo apt-get install python-setuptools</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加新用户 git</span></span><br><span class="line">$ sudo useradd -m git</span><br><span class="line">$ sudo groupadd git</span><br><span class="line">$ sudo passwd git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 gitosis</span></span><br><span class="line">$ <span class="built_in">cd</span> /home/git/</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/tv42/gitosis.git</span><br><span class="line">$ <span class="built_in">cd</span> gitosis</span><br><span class="line">$ sudo python setup.py install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 gitosis 管理员的公钥导入并进行 gitosis 初始化</span></span><br><span class="line">$ sudo -H -u git gitosis-init &lt; /path/to/id_rsa.pub</span><br><span class="line">$ sudo chmod 755 /home/git/repositories/gitosis-admin.git/hooks/post-update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建 git 仓库并初始化</span></span><br><span class="line">$ mkdir ~/repositories/testproj.git</span><br><span class="line">$ <span class="built_in">cd</span> ~/repositoreis/testproj.git</span><br><span class="line">$ git init --bare</span><br></pre></td></tr></table></figure>
<p>如果想要重新创建管理员，只需要将 repositories 下的 gitosis-admin.git 删除，之后重新执行初始化即可。</p>
<p>客户端配置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置 gitosis</span></span><br><span class="line">$ git <span class="built_in">clone</span> git@&lt;server-ip&gt;:gitosis-admin.git</span><br><span class="line">$ <span class="built_in">cd</span> gitosis-admin</span><br><span class="line"></span><br><span class="line"><span class="comment"># copy other members' id_rsa.pub files into keydir</span></span><br><span class="line">$ vim gitosis.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># add the following, and save</span></span><br><span class="line"><span class="comment"># &lt;member1&gt;@&lt;server1&gt; and &lt;member2&gt;@&lt;server2&gt; are not the gitosis admin</span></span><br><span class="line">[group developers]</span><br><span class="line">members = &lt;member1&gt;@&lt;server1&gt; &lt;member2&gt;@&lt;server2&gt;</span><br><span class="line">writable = testproj</span><br><span class="line"></span><br><span class="line">[repo testproj]</span><br><span class="line">description = repo <span class="keyword">for</span> testproj</span><br><span class="line"></span><br><span class="line"><span class="comment"># copy the &lt;member1&gt;@&lt;server1&gt;.pub and &lt;member2&gt;@&lt;server2&gt;.pub to the keydir/ directory</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># commit and push</span></span><br><span class="line">$ git add gitosis.conf keydir/*</span><br><span class="line">$ git commit -m <span class="string">'add &lt;member1&gt; and &lt;member2&gt;'</span></span><br><span class="line">$ git push origin master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建 testproj 工程</span></span><br><span class="line">$ <span class="built_in">cd</span></span><br><span class="line">$ mkdir testproj</span><br><span class="line">$ <span class="built_in">cd</span> testproj</span><br><span class="line">$ git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># add anything you want, e.g. test.c</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交到远程仓库</span></span><br><span class="line">$ git add test.c</span><br><span class="line">$ git commit -m <span class="string">'initial commit for test.c'</span></span><br><span class="line">$ git remote add origin git@&lt;server-ip&gt;:testproj.git</span><br><span class="line">$ git push origin master</span><br><span class="line"></span><br><span class="line"><span class="comment"># COMMENT: you don't need to manually add ssh public key to the</span></span><br><span class="line"><span class="comment"># /home/git/.ssh/authorized_keys file, gitosis-admin does this for you!!!</span></span><br></pre></td></tr></table></figure>
<h2 id="gitweb"><a href="#gitweb" class="headerlink" title="gitweb"></a>gitweb</h2><p>gitweb 是基于浏览器的图形化 git 管理工具。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install gitweb</span><br><span class="line">sudo ln -s /user/share/gitweb/ /path/to/htdocs/</span><br><span class="line">sudo vim /etc/gitweb.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 $projectroot 改为工程所在目录</span></span><br><span class="line"><span class="comment"># 如工程路径为：/path/to/repositories/xxx.git，则 $projectroot 改为 /path/to/repositories</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 另外，可以修改 xxx.git 目录下的 description 文件，添加一行工程描述</span></span><br><span class="line"><span class="comment"># 还可以新建 cloneurl 文件，添加一行工程的 clone 地址</span></span><br></pre></td></tr></table></figure>
<p>注意：gitweb 默认的页面是 index.cgi，但是 Apache 的 httpd.conf 文件中的 DirectoryIndex 是以 index.html 为起始顺序寻找的，所以我们需要更改一下原来的查找方式，让我们默认就能打开 index.cgi。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在 gitweb 目录下添加 index.html</span></span><br><span class="line">&lt;meta http-equiv=<span class="string">"refresh"</span> content=<span class="string">"0; url=index.cgi"</span>&gt;</span><br></pre></td></tr></table></figure>
<h2 id="让-git-status-支持中文字符-1"><a href="#让-git-status-支持中文字符-1" class="headerlink" title="让 git status 支持中文字符"></a>让 git status 支持中文字符</h2><p>如果使用 UTF-8 字符集</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.quotepath <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p>如果使用 GBK 字符集</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global i18n.logOutputEncoding gbk</span><br><span class="line">git config --global i18n.commitEncoding gbk</span><br></pre></td></tr></table></figure>
<h2 id="github"><a href="#github" class="headerlink" title="github"></a>github</h2><p>如果想要在 github 上用 ssh 进行免密码提交，在设置完 ssh key 之后，进行如下测试：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -vT git@github.com</span><br></pre></td></tr></table></figure>
<p>如果检测没有问题，下面假设现在有一个工程，叫 test，那么需要添加 remote 才能正常提交，但是这个 remote 的写法有点特别：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin git@github.com:&lt;username&gt;/test.git</span><br></pre></td></tr></table></figure>

                    
                        

                    
                    
                        <p>
                            <a href="/2015/11/21/Things-Need-to-Know-about-Git/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2015/11/21/Setting-up-Redmine/">
                            Setting up Redmine
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2015-11-21T22:16:41+08:00">
	
		    11月 21, 2015
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Techniques/">Techniques</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="安装-Ruby-on-Rails"><a href="#安装-Ruby-on-Rails" class="headerlink" title="安装 Ruby on Rails"></a>安装 Ruby on Rails</h2><h3 id="安装-RVM"><a href="#安装-RVM" class="headerlink" title="安装 RVM"></a>安装 RVM</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># for single user, it will be installed under ~/.rvm</span></span><br><span class="line">$ curl -L get.rvm.io | bash -s stable</span><br><span class="line"><span class="comment"># for all users, it will be installed under /usr/local/rvm</span></span><br><span class="line">$ sudo curl -L get.vm.io | bash -s stable</span><br></pre></td></tr></table></figure>
<h3 id="安装-Ruby"><a href="#安装-Ruby" class="headerlink" title="安装 Ruby"></a>安装 Ruby</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ rvm install ruby</span><br><span class="line"><span class="comment"># check the ruby version</span></span><br><span class="line">$ ruby -v</span><br></pre></td></tr></table></figure>
<h3 id="安装-Rails"><a href="#安装-Rails" class="headerlink" title="安装 Rails"></a>安装 Rails</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># list all the download sources</span></span><br><span class="line">$ gem <span class="built_in">source</span> -l</span><br><span class="line"><span class="comment"># remove the origin sources</span></span><br><span class="line">$ gem <span class="built_in">source</span> -r https://rubygems.org/</span><br><span class="line">$ gem <span class="built_in">source</span> -a https://ruby.taobao.org/</span><br><span class="line">$ gem install rails</span><br></pre></td></tr></table></figure>
<h2 id="安装-Apache2"><a href="#安装-Apache2" class="headerlink" title="安装 Apache2"></a>安装 Apache2</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install apache2</span><br></pre></td></tr></table></figure>
<h2 id="安装-MySQL-PhpMyAdmin"><a href="#安装-MySQL-PhpMyAdmin" class="headerlink" title="安装 MySQL, PhpMyAdmin"></a>安装 MySQL, PhpMyAdmin</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install mysql-client mysql-server phpmyadmin</span><br></pre></td></tr></table></figure>
<h2 id="安装-PHP"><a href="#安装-PHP" class="headerlink" title="安装 PHP"></a>安装 PHP</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install libapache2-mod-php5</span><br></pre></td></tr></table></figure>
<h2 id="安装-Redmine"><a href="#安装-Redmine" class="headerlink" title="安装 Redmine"></a>安装 Redmine</h2><p>Download the source from www.redmine.org and extract the file to /var/www/html/redmine.<br><strong>Make sure that the redmine directory belongs to group www-data.</strong><br><strong>The own of the redmine directory should in the group of www-data.</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html</span><br><span class="line">$ sudo chown -R www-data:www-data redmine</span><br><span class="line">$ <span class="built_in">cd</span> redmine</span><br><span class="line">$ sudo chmod -R 775 files <span class="built_in">log</span> tmp public/plugin_assets</span><br><span class="line"><span class="comment"># if you set the permission to 755 according to the official doc,</span></span><br><span class="line"><span class="comment"># you will not install the plugin successfully.</span></span><br></pre></td></tr></table></figure>
<h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE redmine CHARACTER SET utf8;</span><br><span class="line">CREATE USER &apos;redmine&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;&lt;my_password&gt;&apos;;</span><br><span class="line">GRANT ALL PRIVILEGES ON redmine.* TO &apos;redmine&apos;@&apos;localhost&apos;;</span><br></pre></td></tr></table></figure>
<h3 id="数据库连接配置"><a href="#数据库连接配置" class="headerlink" title="数据库连接配置"></a>数据库连接配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html/redmine/config</span><br><span class="line">$ copy database.yml.example database.yml</span><br><span class="line">$ vim database.yml</span><br><span class="line"></span><br><span class="line">production:</span><br><span class="line">  adapter: mysql2</span><br><span class="line">  database: redmine</span><br><span class="line">  host: localhost</span><br><span class="line">  username: redmine</span><br><span class="line">  password: &lt;my_password&gt;</span><br></pre></td></tr></table></figure>
<h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html/redmine</span><br><span class="line">$ gem install bundler</span><br><span class="line">$ bundle install --without development <span class="built_in">test</span></span><br><span class="line"><span class="comment"># during the process, you may be prompted to install Rmagick</span></span><br></pre></td></tr></table></figure>
<h3 id="生成-session-secret-key"><a href="#生成-session-secret-key" class="headerlink" title="生成 session secret key"></a>生成 session secret key</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html/redmine</span><br><span class="line">$ bundle <span class="built_in">exec</span> rake generate_secret_token</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">$ rake secret</span><br><span class="line"><span class="comment"># then we should add that key to the /etc/profile file like this</span></span><br><span class="line"><span class="built_in">export</span> SECRET_KEY_BASE=asdf12320890asd09f23rlkuf09da09sdfklk324</span><br></pre></td></tr></table></figure>
<h3 id="初始化数据库"><a href="#初始化数据库" class="headerlink" title="初始化数据库"></a>初始化数据库</h3><p><strong>该过程可以在你删除了数据库中的表之后新建数据库用</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html/redmine</span><br><span class="line">$ RAILS_ENV=production bundle <span class="built_in">exec</span> rake db:migrate</span><br><span class="line">$ RAILS_ENV=production bundle <span class="built_in">exec</span> rake redmine:load_default_data</span><br></pre></td></tr></table></figure>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html/redmine</span><br><span class="line">$ bundle <span class="built_in">exec</span> rails server webrick -e production [-b &lt;ip&gt;] [-d]</span><br><span class="line"><span class="comment"># the -b option change the default address from localhost:3000</span></span><br><span class="line"><span class="comment"># to &lt;ip&gt;:3000</span></span><br><span class="line"><span class="comment"># the -d option runs the server as a daemon.</span></span><br></pre></td></tr></table></figure>
<h2 id="建立-Apache2-和-Redmine-的连接"><a href="#建立-Apache2-和-Redmine-的连接" class="headerlink" title="建立 Apache2 和 Redmine 的连接"></a>建立 Apache2 和 Redmine 的连接</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ gem install passenger</span><br><span class="line">$ passenger-install-apache2-module</span><br><span class="line"><span class="comment"># then the install process will guide you through.</span></span><br><span class="line"><span class="comment"># during the process, you will be asked to add code like the following to /etc/apache2/apache2.conf</span></span><br><span class="line">LoadModule passenger_module /usr/<span class="built_in">local</span>/rvm/gems/ruby-2.2.1/gems/passenger-5.0.21/buildout/apache2/mod_passenger.so</span><br><span class="line">&lt;IfModule mod_passenger.c&gt;</span><br><span class="line">        PassengerRoot /usr/<span class="built_in">local</span>/rvm/gems/ruby-2.2.1/gems/passenger-5.0.21</span><br><span class="line">        PassengerDefaultRuby /usr/<span class="built_in">local</span>/rvm/gems/ruby-2.2.1/wrappers/ruby</span><br><span class="line">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure>
<h3 id="建立站点配置"><a href="#建立站点配置" class="headerlink" title="建立站点配置"></a>建立站点配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/apache2/apache2.conf</span><br><span class="line"><span class="comment">#add 'ServerName localhost'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/apache2/sites-available/000-default.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># the default port is for redmine</span></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">        DocumentRoot /var/www/html/redmine/public</span><br><span class="line">        &lt;Directory /var/www/html/redmine/public&gt;</span><br><span class="line">                AllowOverride All</span><br><span class="line">                Options -MultiViews</span><br><span class="line">        &lt;/Directory&gt;</span><br><span class="line">        RailsEnv production</span><br><span class="line">        RailsBaseURI /redmine</span><br><span class="line">        ErrorLog <span class="variable">$&#123;APACHE_LOG_DIR&#125;</span>/error.log</span><br><span class="line">        CustomLog <span class="variable">$&#123;APACHE_LOG_DIR&#125;</span>/access.log combined</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">Listen 3000 <span class="comment"># we should listen to port 3000, or we cannot connect to it</span></span><br><span class="line"><span class="comment"># this is for the original apache site</span></span><br><span class="line">&lt;VirtualHost *:3000&gt;</span><br><span class="line">        DocumentRoot /var/www/html/</span><br><span class="line">        ErrorLog <span class="variable">$&#123;APACHE_LOG_DIR&#125;</span>/error.log</span><br><span class="line">        CustomLog <span class="variable">$&#123;APACHE_LOG_DIR&#125;</span>/access.log combined</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<h2 id="配置-Redmine-Mail-功能"><a href="#配置-Redmine-Mail-功能" class="headerlink" title="配置 Redmine Mail 功能"></a>配置 Redmine Mail 功能</h2><ol>
<li>申请邮箱</li>
<li><p>编辑配置文件</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html/redmine/config</span><br><span class="line">$ copy configuration.yml.example configuration.yml</span><br><span class="line">$ vim configuration.yml</span><br><span class="line"><span class="comment"># add the following to the last section of the file    </span></span><br><span class="line"><span class="comment"># be careful that this configuration cannot accept tab, we should all use spaces instead.</span></span><br><span class="line">production:</span><br><span class="line">  email_delivery:</span><br><span class="line">    delivery_method: :smtp</span><br><span class="line">    smtp_settings:</span><br><span class="line">      address: <span class="string">"smtp.sohu.com"</span></span><br><span class="line">      port: 25</span><br><span class="line">    <span class="comment"># if the site supports ssl access, then we should disable the port 25</span></span><br><span class="line">    <span class="comment"># then uncomment the following three lines.</span></span><br><span class="line">    <span class="comment"># tls: true</span></span><br><span class="line">    <span class="comment"># enable_starttls_auto: true</span></span><br><span class="line">    <span class="comment"># port: 587</span></span><br><span class="line">      domain: <span class="string">"smtp.sohu.com"</span></span><br><span class="line">      authentication: :login</span><br><span class="line">      user_name: <span class="string">"lhserver2011@sohu.com"</span></span><br><span class="line">      password: 123456 <span class="comment"># password don't quoted</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="建立-Redmine-同-Git-的连接"><a href="#建立-Redmine-同-Git-的连接" class="headerlink" title="建立 Redmine 同 Git 的连接"></a>建立 Redmine 同 Git 的连接</h2><p>假设 git 的某个工程存放在 /home/git/repositories/xyz.git，那么在 Redmine 中建立工程的版本库时，就要写这个绝对路径。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将 www-data 加入到 git 组中</span></span><br><span class="line">$ sudo adduser www-data git</span><br><span class="line"><span class="comment"># 更正 xyz.git 的权限为 755</span></span><br></pre></td></tr></table></figure>
<h2 id="添加-DMSF-插件"><a href="#添加-DMSF-插件" class="headerlink" title="添加 DMSF 插件"></a>添加 DMSF 插件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html/redmine</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/danmunn/redmine_dmsf.git plugins/redmine_dmsf</span><br><span class="line">$ bundle <span class="built_in">exec</span> rake redmine:plugins:migrate RAILS_ENV=<span class="string">"production"</span></span><br><span class="line">$ sudo service apache2 restart</span><br><span class="line"><span class="comment"># then in the redmine project page, you should manually check the box of DMSF</span></span><br></pre></td></tr></table></figure>
<h2 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tail -f /var/<span class="built_in">log</span>/apache2/error.log</span><br></pre></td></tr></table></figure>

                    
                        

                    
                    
                        <p>
                            <a href="/2015/11/21/Setting-up-Redmine/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2015/09/03/Setting-up-a-New-Blog/">
                            Setting up a New Blog
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2015-09-03T11:13:32+08:00">
	
		    9月 03, 2015
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Techniques/">Techniques</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h2><p>请参照 <a href="https://hexo.io/docs/" target="_blank" rel="noopener">Hexo 官方文档</a></p>
<h2 id="安装-git-支持"><a href="#安装-git-支持" class="headerlink" title="安装 git 支持"></a>安装 git 支持</h2><p>不安装的话，在部署的时候，会提示找不到 git。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<h2 id="创建并初始化-Hexo"><a href="#创建并初始化-Hexo" class="headerlink" title="创建并初始化 Hexo"></a>创建并初始化 Hexo</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir /path/to/your/blogDir</span><br><span class="line">$ <span class="built_in">cd</span> /path/to/your/blogDir</span><br><span class="line">$ hexo init</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure>
<h2 id="启动本地服务并查看"><a href="#启动本地服务并查看" class="headerlink" title="启动本地服务并查看"></a>启动本地服务并查看</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>接下来，打开浏览器，输入 localhost:4000，即可查看本地博客。</p>
<h2 id="将本地博客部署到-Github-上"><a href="#将本地博客部署到-Github-上" class="headerlink" title="将本地博客部署到 Github 上"></a>将本地博客部署到 Github 上</h2><ol>
<li>在 <a href="https://github.com" target="_blank" rel="noopener">Github</a> 上新建一个 repository，如果你的账号名称为 xyz，那么你的 repository 名称应该为 xyz.github.io。</li>
<li><p>编辑 /path/to/your/blogDir 目录下的 _config.yml 文件：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repository: git@github.com:xyz/xyz.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行部署命令</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br><span class="line">$ hexo deploy <span class="comment"># 相当于 git 提交</span></span><br><span class="line"><span class="comment"># 接下来需要输入你在 github 上的账号密码，以便进行提交，这里可以设置 SSH 免密码提交</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Hexo-的一些常用快捷键"><a href="#Hexo-的一些常用快捷键" class="headerlink" title="Hexo 的一些常用快捷键"></a>Hexo 的一些常用快捷键</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo g == hexo generate</span><br><span class="line">hexo d == hexo deploy</span><br><span class="line">hexo n == hexo new</span><br></pre></td></tr></table></figure>
<h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><ol>
<li>/path/to/your/blogDir/source/ 目录用于存放博客相关的文件，如 _posts 目录存放所有文章，我们可以自己新建 assets 目录，用于存放一些图片之类的文件。</li>
<li>/path/to/your/blogDir/themes/ 目录用于存放博客主题。</li>
</ol>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>编辑 /path/to/your/blogDir/_config.yml 文件：</p>
<ol>
<li>根据自己的情况，填写 title, subtitle, description, author, language 几项。</li>
<li><p>自定义文章名称：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new_post_name: :year-:month-:day-:title.md</span><br></pre></td></tr></table></figure>
<p> 假定今天是 2015 年 10 月 1 号，我们新建一篇文章，</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new post <span class="string">"my first post"</span></span><br></pre></td></tr></table></figure>
<p> 该命令会在执行后，根据配置文件，自动在 /path/to/your/blogDir/source/_posts 目录下新建名称为 2015-10-01-my-first-post.md 的文件。</p>
</li>
</ol>
<h2 id="自定义-404-页面"><a href="#自定义-404-页面" class="headerlink" title="自定义 404 页面"></a>自定义 404 页面</h2><p>github 无法对二级域名（xxx.github.io）提供 404 页面自定义功能。目前的做法是，使用其他站点提供的公共 404 页面做跳转，我使用的是腾讯公益页面，具体做法如下：</p>
<p>在 source 目录下新建 404.html 页面，然后把从腾讯公益页面获得的代码加入其中，保存后重新部署即可，试试刷新页面看看，很方便。</p>
<h2 id="更换主题"><a href="#更换主题" class="headerlink" title="更换主题"></a>更换主题</h2><p>你可以到 <a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="noopener">https://github.com/hexojs/hexo/wiki/Themes</a> 挑选你自己喜欢的主题。</p>
<p>我选择的是 <a href="https://github.com/litten/hexo-theme-yilia" target="_blank" rel="noopener">yilia</a>，下面介绍如何安装和配置。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /path/to/your/blogDir</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/litten/hexo-theme-yilia.git themes/yilia</span><br><span class="line">$ <span class="built_in">cd</span> themes/yilia</span><br></pre></td></tr></table></figure>
<p>下面编辑 <strong>yilia 目录下</strong>的 _config.yml：</p>
<ol>
<li>subnav 下面的每个链接都应该写上 http 或 https 前缀。</li>
<li>mail 的前缀是 mailto。</li>
<li>假定我把头像图片放在了 /path/to/your/blogDir/source/assets 目录下，名称为 pic.jpg，那么 avatar 头像的路径为 “/assets/pic.jpg”。</li>
<li>duoshuo 评论需要先在 <a href="http://duoshuo.com" target="_blank" rel="noopener">多说</a> 注册自己的账号，注册之后会有自己的域名，假设域名为 xyz.duoshuo.com，那么配置文件中，将 duoshuo: true 改为 duoshuo: “xyz” 即可。</li>
</ol>
<h3 id="通过-Instagram-获取图片"><a href="#通过-Instagram-获取图片" class="headerlink" title="通过 Instagram 获取图片"></a>通过 Instagram 获取图片</h3><p>首先，请参考 <a href="https://github.com/litten/hexo-theme-yilia/wiki/%E5%90%8C%E6%AD%A5%E4%BD%A0%E7%9A%84instagram%E5%9B%BE%E7%89%87" target="_blank" rel="noopener">这篇文章</a>。</p>
<p>然后在文章中给出的 index.md 文件末尾添加如下的代码，否则，图片拉取将会失败：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="找不到-hexo-命令"><a href="#找不到-hexo-命令" class="headerlink" title="找不到 hexo 命令"></a>找不到 hexo 命令</h3><p>hexo 的安装默认不会将环境变量添加到 .bashrc 中，我们需要手动更新，否则，在重新打开 terminal 执行 hexo 时，会提示找不到命令。具体命令的位置为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.nvm/versions/node/v4.2.4/bin</span><br></pre></td></tr></table></figure>
<h3 id="执行-hexo-deploy-后，出现-error-deployer-not-found-git-的错误"><a href="#执行-hexo-deploy-后，出现-error-deployer-not-found-git-的错误" class="headerlink" title="执行 hexo deploy 后，出现 error deployer not found:git 的错误"></a>执行 hexo deploy 后，出现 error deployer not found:git 的错误</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<h3 id="本地的博客文章被无意中删除了怎么办"><a href="#本地的博客文章被无意中删除了怎么办" class="headerlink" title="本地的博客文章被无意中删除了怎么办"></a>本地的博客文章被无意中删除了怎么办</h3><p>首先，通过 hexo 部署的文章可以放到 github 上，但是这个库并不能用来克隆后重新部署，如果本地文章不见了，就没有办法了，所以我们需要把本地的 hexo 博客再建立一个库保存起来，以后每次发布了新文章，需要作的就是两件事，使用 hexo 发布文章，push 代码库。</p>

                    
                        

                    
                    
                        <p>
                            <a href="/2015/09/03/Setting-up-a-New-Blog/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2015/09/02/picture-size-list/">
                            Picture Size List
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2015-09-02T14:59:32+08:00">
	
		    9月 02, 2015
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Encyclopedia/">Encyclopedia</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="Picture-Size"><a href="#Picture-Size" class="headerlink" title="Picture Size"></a>Picture Size</h2><table>
<thead>
<tr>
<th>Kind</th>
<th>size (px)</th>
<th>size (cm)</th>
</tr>
</thead>
<tbody>
<tr>
<td>1寸</td>
<td>413x295</td>
<td>2.5x3.5</td>
</tr>
<tr>
<td>小2寸</td>
<td>567x390</td>
<td>4.8x3.3</td>
</tr>
<tr>
<td>2寸</td>
<td>626x413</td>
<td>3.5x5.3</td>
</tr>
</tbody>
</table>
<h2 id="Standard-Background-Color"><a href="#Standard-Background-Color" class="headerlink" title="Standard Background Color"></a>Standard Background Color</h2><table>
<thead>
<tr>
<th>Color</th>
<th>r.g.b</th>
</tr>
</thead>
<tbody>
<tr>
<td>white</td>
<td>255.255.255</td>
</tr>
<tr>
<td>red</td>
<td>255.0.0</td>
</tr>
<tr>
<td>blue</td>
<td>67.142.219</td>
</tr>
</tbody>
</table>

                    
                        

                    
                    
                        <p>
                            <a href="/2015/09/02/picture-size-list/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
          <li class="pagination-prev">
            <a class="btn btn--default btn--small" href="/archives/page/2/">
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>NEWER POSTS</span>
            </a>
          </li>
        
        
        <li class="pagination-number">page 3 of 3</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 Michael Wu. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Michael Wu</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Tianjin, China
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-vufjrm3fmbuttogo1hxuu0w9w0sesk5iyysjuguc2hdhufot9szxg8twijry.min.js"></script>
<!--SCRIPTS END-->



    </body>
</html>
