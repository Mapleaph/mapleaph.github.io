
<!DOCTYPE html>
<html lang="zh-CN">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="DreamLand">
    <title>NeoKylin - DreamLand</title>
    <meta name="author" content="Michael Wu">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Michael Wu","sameAs":["https://github.com/mapleaph","https://twitter.com/mapleaph","mapleaph@gmail.com"],"image":"avatar.jpg"},"articleBody":"x86 版安装NeoKylin-Personal-v6.0 安装方法更新 [UPDATE]使用 UltraISO 将镜像中的 images/boot.iso 提取出来，然后将其刻录到 U 盘中启动系统，按 TAB 键，将启动参数改为：\n1vmlinuz initrd=initrd.img repo=hd:/dev/sda4:/ quiet\n之后正常安装即可。\n中标麒麟除了 V5，V6 并没有更精确的版本号描述，目前手中共有两个 V6 的版本，只能以默认安装的内核版本进行区分。\n!!如果你能把中标麒麟的 iso 镜像文件刻录到光盘里的话，本文档就可以不用看了!!\n2.6.36 版本文档仅针对使用 U 盘安装系统的情况，目前共验证了两种方式，一种为本地安装，另一种为 FTP 安装。\n本地安装硬盘一个，U 盘一个，一个 Puppy Linux 系统。\nPuppy Linux 下载地址：http://distro.ibiblio.org/puppylinux/\n本测试选用 Puppy 5.6 目录下的 slacko-5.6-PAE.iso\n\n使用 puppy linux 为 U 盘安装 Grub4Dos，将 isolinux 文件夹从麒麟系统镜像中提取出来，并复制到 U 盘中，然后更改 U 盘中的 grub.conf 文件为如下内容：\n 1234root (hdx,y)kernel /isolinux/vmlinuzinitrd /isolinux/initrd.imgboot\n 其中 (hdx,y) 需要根据实际情况进行修改。\n\n对目标硬盘进行分区，注意需要多分出一个分区来，大小 5GB 即可，格式 FAT32/EXT4，用来存放麒麟的系统镜像和从镜像中提取出来的 images 文件夹。\n\n使用 U 盘引导系统，在选择镜像所在磁盘时，选择上一步那个多分出来的分区，这一步找的是 images/install.img 文件。\n\n在之后的安装方式上选择自定义磁盘分区，注意不要挂在最后一个分区，否则之后会出错。\n\n如果在接下来查找镜像时出现 device or resource busy 的错误，那么这种安装方式宣告失败，请换用下面的 FTP 安装方式。\n\n\nFTP 安装如果用的是 Mac 系统，可以选用，Rumpus FTP Server 进行 FTP 服务器搭建，如果用 Windows，可用 File zilla。\n\n同本地安装的第一步\n\n将 Packages, repodata, images 文件夹从系统镜像中提取出来并放到 ftp 服务器根目录中。\n\n用 U 盘启动系统，镜像存在位置选择 URL，然后在地址栏中输入 ftp://192.168.x.x/ 正常情况下，会显示 retrieving…，只有按部就班安装即可。\n\n\n3.3.4 版\n将 images/boot.iso 从镜像中提取出来\n\n用 UltraISO 将 boot.iso 写入 U 盘\n\n将麒麟系统镜像拷贝到 U 盘中\n\n用 U 盘引导系统，在出现安装菜单时按 TAB 键，将命令改为\n 1repo=hd:/dev/sdb4:/ quiet\n 如果在安装前检测硬盘时提示： “Disk sda contains BIOS RAID metadata, but is not part of any recognized BIOS RAID sets. Ignoring disk sda” 那么就需要改为：\n 1repo=hd:/dev/sdb4:/ quiet nodmraid\n\n之后按部就班安装即可。\n\n\n中标麒麟 RapidIO 安装指南磁盘规划总共 20GB\n\n\n\npartition\nsize\n\n\n\n\nbios-boot\n1MB\n\n\nboot\n500MB\n\n\nroot\n16GB\n\n\nswap\n3GB\n\n\n\n编译完内核的剩余空间为：3.8GB\n修改安装源提示：该步骤需要确保系统能够联网！\n首先删除 [/etc/yum.repo.d/] 下面的两个文件，然后新建名为 f17.repo 的文件并向其中添加如下内容：\n1234567891011121314151617[fedora]name=f17baseurl=http://archives.fedoraproject.org/pub/archive/fedora/linux/releases/17/Fedora/i386/os/enabled=1gpgcheck=0[everything]name=f17-everythingbaseurl=http://archives.fedoraproject.org/pub/archive/fedora/linux/releases/17/Everything/i386/os/enabled=1gpgcheck=0[updates]name=f17-updatesbaseurl=http://archives.fedoraproject.org/pub/archive/fedora/linux/updates/17/i386/enabled=1gpgcheck=0\n保存，退出。\n更新安装源1$ sudo yum list\n安装 ncurses 库（make menuconfig 的时候会用到）1$ sudo yum install ncurses-devel\n下载内核源代码123$ cd ~; curl -O https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.3.4.tar.bz2# 等待下载完成后，解压刚刚下载的压缩包并移动到 /usr/src/kernels 目录下$ tar jxf linux-3.3.4.tar.bz2; sudo mv linux-3.3.4 /usr/src/kernels\n对内核进行配置12345678910111213141516$ cd ~/linux-3.3.4/; make mrproper; cp /boot/config-3.3.4-5.1.nk.i686.PAE .config$ make menuconfig# 下面进入内核配置界面# 将对两个地方进行配置# 1. 添加 RapidIO 支持#    进入 Bus options (PCI etc.)，选中 RapidIO support，将会弹出子菜单，根据硬件型号，选择前 4 项，即：##    IDT Tsi721 PCI Express SRIO Controller support#    Discovery timeout duration (seconds) 该值默认为 30#    Enable RapidIO Input/Output Ports#    RapidIO subsystem debug messages## 2. 去掉默认的启动图片，防止跟中标麒麟的默认开机画面相冲突，不改的话会出现一个小企鹅图片，但不影响 RapidIO 功能的实现：#    进入 Device Drivers -&gt; Graphics support，取消选中 Bootup logo 即可。## 确认修改后，退出保存即可。\n编译、安装新内核123# CPU 有几个核，下面的 -j 后面的 n 就改成几，这样可以加快编译速度$ make -j&lt;n&gt;; make modules; sudo make modules_install; sudo make install# 过程中会提示输入密码，请注意，安装完成后，重启系统，将会在启动菜单看到一个 RedHat Linux (3.3.4), 这就是我们的新内核，选这个进入系统就行了。\n小修改\n删除旧内核的相关文件\n 123$ sudo rm /boot/System.map* /boot/vmlinuz* /boot/config-3.3.4-5.1.nk.i686.PAE$ sudo rm -rf /lib/modules/3.3.4-5.1.nk.i686.PAE$ sudo rm -rf /usr/src/kernels/3.3.4-5.1.nk.i686.PAE\n\n生成新的 grub.cfg\n 12$ sudo grub2-mkconfig -o /boot/grub2/grub.cfg# 生成后再对文件进行进一步修改，将 menuentry 后面的 text 去掉\n 保存，退出。\n\n\n旧版本麒麟编译安装 2.6.35 版本内核需要卸载 VirtualBox，否则 make install 的时候会报错。\n使用如下命令：\n1$ rpm -qa | grep VirtualBox | xargs sudo rpm -e\n安装串口测试程序 xgcom 的方法这里讨论的是内核版本为 2.6.36 的中标麒麟\n\n在 https://code.google.com/p/xgcom/ 下载 xgcom-0.04.2 版本源码包\n\n删除系统自带的 vte，这个会同时删除 gnome-terminal 和 gnome-color-manager\n\n将下面的信息新建为文件 f13.repo，并放到 /etc/yum.repo.d/ 目录下\n 1234567891011[f13]name=f13baseurl=http://archives.fedoraproject.org/pub/archive/fedora/linux/releases/13/Fedora/i386/osgpgcheck=0enabled=1[f13-everything]name=f13-everythingbaseurl=http://archives.fedoraproject.org/pub/archive/fedora/linux/releases/13/Everything/i386/osgpgcheck=0enabled=1\n\n将其他源禁用掉\n\n安装 vte, vte-devel, gnome-terminal, gnome-color-manager\n\n进入 xgcom 的源码\n 123./autogen.shmakesudo make install\n\n\n龙芯版安装系统安装目前仅支持整盘复制安装\n\n需要一个可启动的 Linux 系统；\n在 Linux 系统下，重新对目标硬盘进行分区，要求为：整盘一个分区，可以启动，格式为 ext3；\n挂载目标硬盘，进行文件复制：\n12345# 假设 sda1 为目标硬盘的分区$ mount /dev/sda1 /mnt/$ tar --numeric-owner -xlpvf Neokylin-DT6-img.tar.gz -C /mnt --touch# 复制完成之后，卸载目标硬盘$ umount /dev/sda1\n\n启动系统\n123456# 开机进入 PMON 引导命令行，使用 devls 命令查看设备名称，# 假设得到的硬盘名称为 wd0load /dev/fs/ext2@wd0/boot/vmlinux.3a_newspec# 等待加载成功g console=tty root=/dev/sda1 quiet splash loglevel=0# 正常情况下，即等待进入桌面\n\n\n升级 Qt4.8.5适用系统版本：NeoKylin-Desktop-V6.0-Update4-Loongson-Release-Build050-20140124 (可用 cat /etc/.product_info 查看)。\n执行如下命令：\n123456789101112$ sudo rpm -Uvh qt-4.8.6-10.ND6.2.mipsel.rpm \\qt-x11-4.8.6-10.ND6.2.mipsel.rpm \\qt-devel-4.8.6-10.ND6.2.mipsel.rpm \\qt-demos-4.8.6-10.ND6.2.mipsel.rpm \\qt-examples-4.8.6-10.ND6.2.mipsel.rpm \\qt-odbc-4.8.6-10.ND6.2.mipsel.rpm \\qt-doc-4.8.6-10.ND6.2.noarch.rpm \\qt-assistant-4.8.6-10.ND6.2.mipsel.rpm \\qtwebkit-2.2-3.20110513.ND6.3.mipsel.rpm \\libjpeg-turbo-devel-1.2.90-2.ND6.mipsel.rpm \\libjpeg-turbo-1.2.90-2.ND6.mipsel.rpm \\libjpeg-turbo-static-1.2.90-2.ND6.mipsel.rpm\n","dateCreated":"2015-11-22T12:02:57+08:00","dateModified":"2015-12-05T21:03:21+08:00","datePublished":"2015-11-22T12:02:57+08:00","description":"","headline":"NeoKylin","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com/2015/11/22/NeoKylin/"},"publisher":{"@type":"Organization","name":"Michael Wu","sameAs":["https://github.com/mapleaph","https://twitter.com/mapleaph","mapleaph@gmail.com"],"image":"avatar.jpg","logo":{"@type":"ImageObject","url":"avatar.jpg"}},"url":"http://yoursite.com/2015/11/22/NeoKylin/"}</script>
    <meta name="description" content="x86 版安装NeoKylin-Personal-v6.0 安装方法更新 [UPDATE]使用 UltraISO 将镜像中的 images/boot.iso 提取出来，然后将其刻录到 U 盘中启动系统，按 TAB 键，将启动参数改为： 1vmlinuz initrd=initrd.img repo=hd:/dev/sda4:/ quiet 之后正常安装即可。 中标麒麟除了 V5，V6 并没有更精确">
<meta property="og:type" content="blog">
<meta property="og:title" content="NeoKylin">
<meta property="og:url" content="http://yoursite.com/2015/11/22/NeoKylin/index.html">
<meta property="og:site_name" content="DreamLand">
<meta property="og:description" content="x86 版安装NeoKylin-Personal-v6.0 安装方法更新 [UPDATE]使用 UltraISO 将镜像中的 images/boot.iso 提取出来，然后将其刻录到 U 盘中启动系统，按 TAB 键，将启动参数改为： 1vmlinuz initrd=initrd.img repo=hd:/dev/sda4:/ quiet 之后正常安装即可。 中标麒麟除了 V5，V6 并没有更精确">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2015-12-05T13:03:21.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="NeoKylin">
<meta name="twitter:description" content="x86 版安装NeoKylin-Personal-v6.0 安装方法更新 [UPDATE]使用 UltraISO 将镜像中的 images/boot.iso 提取出来，然后将其刻录到 U 盘中启动系统，按 TAB 键，将启动参数改为： 1vmlinuz initrd=initrd.img repo=hd:/dev/sda4:/ quiet 之后正常安装即可。 中标麒麟除了 V5，V6 并没有更精确">
<meta name="twitter:creator" content="@mapleaph">
    
    
        
    
    
        <meta property="og:image" content="http://yoursite.com/assets/images/avatar.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-du2xmrqdqrl2ollgeiw050kpl6l4nbyz7bumjuurjgsxyopifvukebxc9lqe.min.css">
    <!--STYLES END-->
    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">DreamLand</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="/assets/images/avatar.jpg" alt="Bild des Autors"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.jpg" alt="Bild des Autors"/>
                </a>
                <h4 class="sidebar-profile-name">Michael Wu</h4>
                
                    <h5 class="sidebar-profile-bio"><p>author.bio</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="Home"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="Kategorien"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Kategorien</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="Tags"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="Archiv"
                        >
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archiv</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                            title="Suche"
                        >
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Suche</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="Über"
                        >
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Über</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/mapleaph" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://twitter.com/mapleaph" target="_blank" rel="noopener" title="Twitter">
                    
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/mapleaph@gmail.com"
                            title="E-Mail"
                        >
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">E-Mail</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            NeoKylin
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2015-11-22T12:02:57+08:00">
	
		    22 11月 2015
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Techniques/">Techniques</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h2 id="x86-版安装"><a href="#x86-版安装" class="headerlink" title="x86 版安装"></a>x86 版安装</h2><h3 id="NeoKylin-Personal-v6-0-安装方法更新-UPDATE"><a href="#NeoKylin-Personal-v6-0-安装方法更新-UPDATE" class="headerlink" title="NeoKylin-Personal-v6.0 安装方法更新 [UPDATE]"></a>NeoKylin-Personal-v6.0 安装方法更新 [UPDATE]</h3><p>使用 UltraISO 将镜像中的 images/boot.iso 提取出来，然后将其刻录到 U 盘中<br>启动系统，按 TAB 键，将启动参数改为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmlinuz initrd=initrd.img repo=hd:/dev/sda4:/ quiet</span><br></pre></td></tr></table></figure>
<p>之后正常安装即可。</p>
<p>中标麒麟除了 V5，V6 并没有更精确的版本号描述，目前手中共有两个 V6 的版本，只能以默认安装的内核版本进行区分。</p>
<p><strong>!!如果你能把中标麒麟的 iso 镜像文件刻录到光盘里的话，本文档就可以不用看了!!</strong></p>
<h3 id="2-6-36-版"><a href="#2-6-36-版" class="headerlink" title="2.6.36 版"></a>2.6.36 版</h3><p>本文档仅针对使用 U 盘安装系统的情况，目前共验证了两种方式，一种为本地安装，另一种为 FTP 安装。</p>
<h4 id="本地安装"><a href="#本地安装" class="headerlink" title="本地安装"></a>本地安装</h4><p>硬盘一个，U 盘一个，一个 Puppy Linux 系统。</p>
<p>Puppy Linux 下载地址：<a href="http://distro.ibiblio.org/puppylinux/" target="_blank" rel="noopener">http://distro.ibiblio.org/puppylinux/</a></p>
<p>本测试选用 Puppy 5.6 目录下的 slacko-5.6-PAE.iso</p>
<ol>
<li><p>使用 puppy linux 为 U 盘安装 Grub4Dos，将 isolinux 文件夹从麒麟系统镜像中提取出来，并复制到 U 盘中，然后更改 U 盘中的 grub.conf 文件为如下内容：</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root (hdx,y)</span><br><span class="line">kernel /isolinux/vmlinuz</span><br><span class="line">initrd /isolinux/initrd.img</span><br><span class="line">boot</span><br></pre></td></tr></table></figure>
<p> 其中 (hdx,y) 需要根据实际情况进行修改。</p>
</li>
<li><p>对目标硬盘进行分区，注意需要多分出一个分区来，大小 5GB 即可，格式 FAT32/EXT4，用来存放麒麟的系统镜像和从镜像中提取出来的 images 文件夹。</p>
</li>
<li><p>使用 U 盘引导系统，在选择镜像所在磁盘时，选择上一步那个多分出来的分区，这一步找的是 images/install.img 文件。</p>
</li>
<li><p>在之后的安装方式上选择自定义磁盘分区，注意不要挂在最后一个分区，否则之后会出错。</p>
</li>
<li><p>如果在接下来查找镜像时出现 device or resource busy 的错误，那么这种安装方式宣告失败，请换用下面的 FTP 安装方式。</p>
</li>
</ol>
<h4 id="FTP-安装"><a href="#FTP-安装" class="headerlink" title="FTP 安装"></a>FTP 安装</h4><p>如果用的是 Mac 系统，可以选用，Rumpus FTP Server 进行 FTP 服务器搭建，如果用 Windows，可用 File zilla。</p>
<ol>
<li><p>同本地安装的第一步</p>
</li>
<li><p>将 Packages, repodata, images 文件夹从系统镜像中提取出来并放到 ftp 服务器根目录中。</p>
</li>
<li><p>用 U 盘启动系统，镜像存在位置选择 URL，然后在地址栏中输入 ftp://192.168.x.x/ 正常情况下，会显示 retrieving…，只有按部就班安装即可。</p>
</li>
</ol>
<h3 id="3-3-4-版"><a href="#3-3-4-版" class="headerlink" title="3.3.4 版"></a>3.3.4 版</h3><ol>
<li><p>将 images/boot.iso 从镜像中提取出来</p>
</li>
<li><p>用 UltraISO 将 boot.iso 写入 U 盘</p>
</li>
<li><p>将麒麟系统镜像拷贝到 U 盘中</p>
</li>
<li><p>用 U 盘引导系统，在出现安装菜单时按 TAB 键，将命令改为</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repo=hd:/dev/sdb4:/ quiet</span><br></pre></td></tr></table></figure>
<p> 如果在安装前检测硬盘时提示：<br> “Disk sda contains BIOS RAID metadata, but is not part of any recognized BIOS RAID sets. Ignoring disk sda”<br> 那么就需要改为：</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repo=hd:/dev/sdb4:/ quiet nodmraid</span><br></pre></td></tr></table></figure>
</li>
<li><p>之后按部就班安装即可。</p>
</li>
</ol>
<h2 id="中标麒麟-RapidIO-安装指南"><a href="#中标麒麟-RapidIO-安装指南" class="headerlink" title="中标麒麟 RapidIO 安装指南"></a>中标麒麟 RapidIO 安装指南</h2><h3 id="磁盘规划"><a href="#磁盘规划" class="headerlink" title="磁盘规划"></a>磁盘规划</h3><p>总共 20GB</p>
<table>
<thead>
<tr>
<th>partition</th>
<th>size</th>
</tr>
</thead>
<tbody>
<tr>
<td>bios-boot</td>
<td>1MB</td>
</tr>
<tr>
<td>boot</td>
<td>500MB</td>
</tr>
<tr>
<td>root</td>
<td>16GB</td>
</tr>
<tr>
<td>swap</td>
<td>3GB</td>
</tr>
</tbody>
</table>
<p>编译完内核的剩余空间为：3.8GB</p>
<h3 id="修改安装源"><a href="#修改安装源" class="headerlink" title="修改安装源"></a>修改安装源</h3><p>提示：该步骤需要确保系统能够联网！</p>
<p>首先删除 [/etc/yum.repo.d/] 下面的两个文件，然后新建名为 f17.repo 的文件并向其中添加如下内容：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[fedora]</span><br><span class="line">name=f17</span><br><span class="line">baseurl=http://archives.fedoraproject.org/pub/archive/fedora/linux/releases/17/Fedora/i386/os/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[everything]</span><br><span class="line">name=f17-everything</span><br><span class="line">baseurl=http://archives.fedoraproject.org/pub/archive/fedora/linux/releases/17/Everything/i386/os/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[updates]</span><br><span class="line">name=f17-updates</span><br><span class="line">baseurl=http://archives.fedoraproject.org/pub/archive/fedora/linux/updates/17/i386/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br></pre></td></tr></table></figure>
<p>保存，退出。</p>
<h3 id="更新安装源"><a href="#更新安装源" class="headerlink" title="更新安装源"></a>更新安装源</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum list</span><br></pre></td></tr></table></figure>
<h3 id="安装-ncurses-库（make-menuconfig-的时候会用到）"><a href="#安装-ncurses-库（make-menuconfig-的时候会用到）" class="headerlink" title="安装 ncurses 库（make menuconfig 的时候会用到）"></a>安装 ncurses 库（make menuconfig 的时候会用到）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install ncurses-devel</span><br></pre></td></tr></table></figure>
<h3 id="下载内核源代码"><a href="#下载内核源代码" class="headerlink" title="下载内核源代码"></a>下载内核源代码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~; curl -O https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.3.4.tar.bz2</span><br><span class="line"><span class="comment"># 等待下载完成后，解压刚刚下载的压缩包并移动到 /usr/src/kernels 目录下</span></span><br><span class="line">$ tar jxf linux-3.3.4.tar.bz2; sudo mv linux-3.3.4 /usr/src/kernels</span><br></pre></td></tr></table></figure>
<h3 id="对内核进行配置"><a href="#对内核进行配置" class="headerlink" title="对内核进行配置"></a>对内核进行配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/linux-3.3.4/; make mrproper; cp /boot/config-3.3.4-5.1.nk.i686.PAE .config</span><br><span class="line">$ make menuconfig</span><br><span class="line"><span class="comment"># 下面进入内核配置界面</span></span><br><span class="line"><span class="comment"># 将对两个地方进行配置</span></span><br><span class="line"><span class="comment"># 1. 添加 RapidIO 支持</span></span><br><span class="line"><span class="comment">#    进入 Bus options (PCI etc.)，选中 RapidIO support，将会弹出子菜单，根据硬件型号，选择前 4 项，即：</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#    IDT Tsi721 PCI Express SRIO Controller support</span></span><br><span class="line"><span class="comment">#    Discovery timeout duration (seconds) 该值默认为 30</span></span><br><span class="line"><span class="comment">#    Enable RapidIO Input/Output Ports</span></span><br><span class="line"><span class="comment">#    RapidIO subsystem debug messages</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 2. 去掉默认的启动图片，防止跟中标麒麟的默认开机画面相冲突，不改的话会出现一个小企鹅图片，但不影响 RapidIO 功能的实现：</span></span><br><span class="line"><span class="comment">#    进入 Device Drivers -&gt; Graphics support，取消选中 Bootup logo 即可。</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 确认修改后，退出保存即可。</span></span><br></pre></td></tr></table></figure>
<h3 id="编译、安装新内核"><a href="#编译、安装新内核" class="headerlink" title="编译、安装新内核"></a>编译、安装新内核</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CPU 有几个核，下面的 -j 后面的 n 就改成几，这样可以加快编译速度</span></span><br><span class="line">$ make -j&lt;n&gt;; make modules; sudo make modules_install; sudo make install</span><br><span class="line"><span class="comment"># 过程中会提示输入密码，请注意，安装完成后，重启系统，将会在启动菜单看到一个 RedHat Linux (3.3.4), 这就是我们的新内核，选这个进入系统就行了。</span></span><br></pre></td></tr></table></figure>
<h3 id="小修改"><a href="#小修改" class="headerlink" title="小修改"></a>小修改</h3><ol>
<li><p>删除旧内核的相关文件</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo rm /boot/System.map* /boot/vmlinuz* /boot/config-3.3.4-5.1.nk.i686.PAE</span><br><span class="line">$ sudo rm -rf /lib/modules/3.3.4-5.1.nk.i686.PAE</span><br><span class="line">$ sudo rm -rf /usr/src/kernels/3.3.4-5.1.nk.i686.PAE</span><br></pre></td></tr></table></figure>
</li>
<li><p>生成新的 grub.cfg</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo grub2-mkconfig -o /boot/grub2/grub.cfg</span><br><span class="line"><span class="comment"># 生成后再对文件进行进一步修改，将 menuentry 后面的 text 去掉</span></span><br></pre></td></tr></table></figure>
<p> 保存，退出。</p>
</li>
</ol>
<h3 id="旧版本麒麟编译安装-2-6-35-版本内核"><a href="#旧版本麒麟编译安装-2-6-35-版本内核" class="headerlink" title="旧版本麒麟编译安装 2.6.35 版本内核"></a>旧版本麒麟编译安装 2.6.35 版本内核</h3><p>需要卸载 VirtualBox，否则 make install 的时候会报错。</p>
<p>使用如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rpm -qa | grep VirtualBox | xargs sudo rpm -e</span><br></pre></td></tr></table></figure>
<h3 id="安装串口测试程序-xgcom-的方法"><a href="#安装串口测试程序-xgcom-的方法" class="headerlink" title="安装串口测试程序 xgcom 的方法"></a>安装串口测试程序 xgcom 的方法</h3><p>这里讨论的是内核版本为 2.6.36 的中标麒麟</p>
<ol>
<li><p>在 <a href="https://code.google.com/p/xgcom/" target="_blank" rel="noopener">https://code.google.com/p/xgcom/</a> 下载 xgcom-0.04.2 版本源码包</p>
</li>
<li><p>删除系统自带的 vte，这个会同时删除 gnome-terminal 和 gnome-color-manager</p>
</li>
<li><p>将下面的信息新建为文件 f13.repo，并放到 /etc/yum.repo.d/ 目录下</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[f13]</span><br><span class="line">name=f13</span><br><span class="line">baseurl=http://archives.fedoraproject.org/pub/archive/fedora/linux/releases/13/Fedora/i386/os</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"></span><br><span class="line">[f13-everything]</span><br><span class="line">name=f13-everything</span><br><span class="line">baseurl=http://archives.fedoraproject.org/pub/archive/fedora/linux/releases/13/Everything/i386/os</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure>
</li>
<li><p>将其他源禁用掉</p>
</li>
<li><p>安装 vte, vte-devel, gnome-terminal, gnome-color-manager</p>
</li>
<li><p>进入 xgcom 的源码</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./autogen.sh</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="龙芯版安装"><a href="#龙芯版安装" class="headerlink" title="龙芯版安装"></a>龙芯版安装</h2><h3 id="系统安装"><a href="#系统安装" class="headerlink" title="系统安装"></a>系统安装</h3><p><strong>目前仅支持整盘复制安装</strong></p>
<ol>
<li>需要一个可启动的 Linux 系统；</li>
<li>在 Linux 系统下，重新对目标硬盘进行分区，要求为：整盘一个分区，可以启动，格式为 ext3；</li>
<li><p>挂载目标硬盘，进行文件复制：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 假设 sda1 为目标硬盘的分区</span></span><br><span class="line">$ mount /dev/sda1 /mnt/</span><br><span class="line">$ tar --numeric-owner -xlpvf Neokylin-DT6-img.tar.gz -C /mnt --touch</span><br><span class="line"><span class="comment"># 复制完成之后，卸载目标硬盘</span></span><br><span class="line">$ umount /dev/sda1</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动系统</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开机进入 PMON 引导命令行，使用 devls 命令查看设备名称，</span></span><br><span class="line"><span class="comment"># 假设得到的硬盘名称为 wd0</span></span><br><span class="line">load /dev/fs/ext2@wd0/boot/vmlinux.3a_newspec</span><br><span class="line"><span class="comment"># 等待加载成功</span></span><br><span class="line">g console=tty root=/dev/sda1 quiet splash loglevel=0</span><br><span class="line"><span class="comment"># 正常情况下，即等待进入桌面</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="升级-Qt4-8-5"><a href="#升级-Qt4-8-5" class="headerlink" title="升级 Qt4.8.5"></a>升级 Qt4.8.5</h3><p>适用系统版本：NeoKylin-Desktop-V6.0-Update4-Loongson-Release-Build050-20140124 (可用 cat /etc/.product_info 查看)。</p>
<p>执行如下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ sudo rpm -Uvh qt-4.8.6-10.ND6.2.mipsel.rpm \</span><br><span class="line">qt-x11-4.8.6-10.ND6.2.mipsel.rpm \</span><br><span class="line">qt-devel-4.8.6-10.ND6.2.mipsel.rpm \</span><br><span class="line">qt-demos-4.8.6-10.ND6.2.mipsel.rpm \</span><br><span class="line">qt-examples-4.8.6-10.ND6.2.mipsel.rpm \</span><br><span class="line">qt-odbc-4.8.6-10.ND6.2.mipsel.rpm \</span><br><span class="line">qt-doc-4.8.6-10.ND6.2.noarch.rpm \</span><br><span class="line">qt-assistant-4.8.6-10.ND6.2.mipsel.rpm \</span><br><span class="line">qtwebkit-2.2-3.20110513.ND6.3.mipsel.rpm \</span><br><span class="line">libjpeg-turbo-devel-1.2.90-2.ND6.mipsel.rpm \</span><br><span class="line">libjpeg-turbo-1.2.90-2.ND6.mipsel.rpm \</span><br><span class="line">libjpeg-turbo-static-1.2.90-2.ND6.mipsel.rpm</span><br></pre></td></tr></table></figure>

            

        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/11/26/Solaris/" data-tooltip="Solaris" aria-label="FRÜHER: Solaris">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">FRÜHER</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/11/22/Windows-Power-Management/" data-tooltip="Windows Power Management" aria-label="NÄCHSTER: Windows Power Management">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NÄCHSTER</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://yoursite.com/2015/11/22/NeoKylin/" title="Teilen auf Twitter">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=http://yoursite.com/2015/11/22/NeoKylin/" title="Share on Weibo">
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 Michael Wu. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/11/26/Solaris/" data-tooltip="Solaris" aria-label="FRÜHER: Solaris">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">FRÜHER</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/11/22/Windows-Power-Management/" data-tooltip="Windows Power Management" aria-label="NÄCHSTER: Windows Power Management">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NÄCHSTER</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://yoursite.com/2015/11/22/NeoKylin/" title="Teilen auf Twitter">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=http://yoursite.com/2015/11/22/NeoKylin/" title="Share on Weibo">
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <i id="btn-close-shareoptions" class="fa fa-times"></i>
    <ul class="share-options">
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://yoursite.com/2015/11/22/NeoKylin/">
                    <i class="fab fa-twitter" aria-hidden="true"></i><span>Teilen auf Twitter</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="http://service.weibo.com/share/share.php?&amp;title=http://yoursite.com/2015/11/22/NeoKylin/">
                    <i class="fab fa-weibo" aria-hidden="true"></i><span>Share on Weibo</span>
                </a>
            </li>
        
    </ul>
</div>

            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.jpg" alt="Bild des Autors"/>
        
            <h4 id="about-card-name">Michael Wu</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Tianjin, China
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-vufjrm3fmbuttogo1hxuu0w9w0sesk5iyysjuguc2hdhufot9szxg8twijry.min.js"></script>
<!--SCRIPTS END-->

    



    </body>
</html>
