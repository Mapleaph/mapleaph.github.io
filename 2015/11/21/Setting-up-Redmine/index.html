
<!DOCTYPE html>
<html lang="zh-CN">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="DreamLand">
    <title>Setting up Redmine - DreamLand</title>
    <meta name="author" content="Michael Wu">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Michael Wu","sameAs":["https://github.com/mapleaph","https://twitter.com/mapleaph","mapleaph@gmail.com"],"image":"avatar.jpg"},"articleBody":"安装 Ruby on Rails安装 RVM1234# for single user, it will be installed under ~/.rvm$ curl -L get.rvm.io | bash -s stable# for all users, it will be installed under /usr/local/rvm$ sudo curl -L get.vm.io | bash -s stable\n安装 Ruby123$ rvm install ruby# check the ruby version$ ruby -v\n安装 Rails123456# list all the download sources$ gem source -l# remove the origin sources$ gem source -r https://rubygems.org/$ gem source -a https://ruby.taobao.org/$ gem install rails\n安装 Apache21$ sudo apt-get install apache2\n安装 MySQL, PhpMyAdmin1$ sudo apt-get install mysql-client mysql-server phpmyadmin\n安装 PHP1$ sudo apt-get install libapache2-mod-php5\n安装 RedmineDownload the source from www.redmine.org and extract the file to /var/www/html/redmine.Make sure that the redmine directory belongs to group www-data.The own of the redmine directory should in the group of www-data.\n123456$ cd /var/www/html$ sudo chown -R www-data:www-data redmine$ cd redmine$ sudo chmod -R 775 files log tmp public/plugin_assets# if you set the permission to 755 according to the official doc,# you will not install the plugin successfully.\n创建数据库123CREATE DATABASE redmine CHARACTER SET utf8;CREATE USER &apos;redmine&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;&lt;my_password&gt;&apos;;GRANT ALL PRIVILEGES ON redmine.* TO &apos;redmine&apos;@&apos;localhost&apos;;\n数据库连接配置12345678910$ cd /var/www/html/redmine/config$ copy database.yml.example database.yml$ vim database.ymlproduction:  adapter: mysql2  database: redmine  host: localhost  username: redmine  password: &lt;my_password&gt;\n安装依赖1234$ cd /var/www/html/redmine$ gem install bundler$ bundle install --without development test# during the process, you may be prompted to install Rmagick\n生成 session secret key123456$ cd /var/www/html/redmine$ bundle exec rake generate_secret_token# or$ rake secret# then we should add that key to the /etc/profile file like thisexport SECRET_KEY_BASE=asdf12320890asd09f23rlkuf09da09sdfklk324\n初始化数据库该过程可以在你删除了数据库中的表之后新建数据库用\n123$ cd /var/www/html/redmine$ RAILS_ENV=production bundle exec rake db:migrate$ RAILS_ENV=production bundle exec rake redmine:load_default_data\n测试12345$ cd /var/www/html/redmine$ bundle exec rails server webrick -e production [-b &lt;ip&gt;] [-d]# the -b option change the default address from localhost:3000# to &lt;ip&gt;:3000# the -d option runs the server as a daemon.\n建立 Apache2 和 Redmine 的连接123456789$ gem install passenger$ passenger-install-apache2-module# then the install process will guide you through.# during the process, you will be asked to add code like the following to /etc/apache2/apache2.confLoadModule passenger_module /usr/local/rvm/gems/ruby-2.2.1/gems/passenger-5.0.21/buildout/apache2/mod_passenger.so&lt;IfModule mod_passenger.c&gt;        PassengerRoot /usr/local/rvm/gems/ruby-2.2.1/gems/passenger-5.0.21        PassengerDefaultRuby /usr/local/rvm/gems/ruby-2.2.1/wrappers/ruby&lt;/IfModule&gt;\n建立站点配置12$ sudo vim /etc/apache2/apache2.conf#add 'ServerName localhost'\n12345678910111213141516171819202122$ sudo vim /etc/apache2/sites-available/000-default.conf# the default port is for redmine&lt;VirtualHost *:80&gt;        DocumentRoot /var/www/html/redmine/public        &lt;Directory /var/www/html/redmine/public&gt;                AllowOverride All                Options -MultiViews        &lt;/Directory&gt;        RailsEnv production        RailsBaseURI /redmine        ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log        CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined&lt;/VirtualHost&gt;Listen 3000 # we should listen to port 3000, or we cannot connect to it# this is for the original apache site&lt;VirtualHost *:3000&gt;        DocumentRoot /var/www/html/        ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log        CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined&lt;/VirtualHost&gt;\n配置 Redmine Mail 功能\n申请邮箱\n编辑配置文件\n 1234567891011121314151617181920$ cd /var/www/html/redmine/config$ copy configuration.yml.example configuration.yml$ vim configuration.yml# add the following to the last section of the file    # be careful that this configuration cannot accept tab, we should all use spaces instead.production:  email_delivery:    delivery_method: :smtp    smtp_settings:      address: \"smtp.sohu.com\"      port: 25    # if the site supports ssl access, then we should disable the port 25    # then uncomment the following three lines.    # tls: true    # enable_starttls_auto: true    # port: 587      domain: \"smtp.sohu.com\"      authentication: :login      user_name: \"lhserver2011@sohu.com\"      password: 123456 # password don't quoted\n\n\n建立 Redmine 同 Git 的连接假设 git 的某个工程存放在 /home/git/repositories/xyz.git，那么在 Redmine 中建立工程的版本库时，就要写这个绝对路径。\n123# 将 www-data 加入到 git 组中$ sudo adduser www-data git# 更正 xyz.git 的权限为 755\n添加 DMSF 插件12345$ cd /var/www/html/redmine$ git clone https://github.com/danmunn/redmine_dmsf.git plugins/redmine_dmsf$ bundle exec rake redmine:plugins:migrate RAILS_ENV=\"production\"$ sudo service apache2 restart# then in the redmine project page, you should manually check the box of DMSF\n查看日志1$ tail -f /var/log/apache2/error.log\n","dateCreated":"2015-11-21T22:16:41+08:00","dateModified":"2016-01-06T18:36:12+08:00","datePublished":"2015-11-21T22:16:41+08:00","description":"","headline":"Setting up Redmine","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com/2015/11/21/Setting-up-Redmine/"},"publisher":{"@type":"Organization","name":"Michael Wu","sameAs":["https://github.com/mapleaph","https://twitter.com/mapleaph","mapleaph@gmail.com"],"image":"avatar.jpg","logo":{"@type":"ImageObject","url":"avatar.jpg"}},"url":"http://yoursite.com/2015/11/21/Setting-up-Redmine/"}</script>
    <meta name="description" content="安装 Ruby on Rails安装 RVM1234# for single user, it will be installed under ~/.rvm$ curl -L get.rvm.io | bash -s stable# for all users, it will be installed under /usr/local/rvm$ sudo curl -L get.vm.io |">
<meta property="og:type" content="blog">
<meta property="og:title" content="Setting up Redmine">
<meta property="og:url" content="http://yoursite.com/2015/11/21/Setting-up-Redmine/index.html">
<meta property="og:site_name" content="DreamLand">
<meta property="og:description" content="安装 Ruby on Rails安装 RVM1234# for single user, it will be installed under ~/.rvm$ curl -L get.rvm.io | bash -s stable# for all users, it will be installed under /usr/local/rvm$ sudo curl -L get.vm.io |">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2016-01-06T10:36:12.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Setting up Redmine">
<meta name="twitter:description" content="安装 Ruby on Rails安装 RVM1234# for single user, it will be installed under ~/.rvm$ curl -L get.rvm.io | bash -s stable# for all users, it will be installed under /usr/local/rvm$ sudo curl -L get.vm.io |">
<meta name="twitter:creator" content="@mapleaph">
    
    
        
    
    
        <meta property="og:image" content="http://yoursite.com/assets/images/avatar.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/all.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/css/thumbs.css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">DreamLand</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="/assets/images/avatar.jpg" alt="Bild des Autors"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.jpg" alt="Bild des Autors"/>
                </a>
                <h4 class="sidebar-profile-name">Michael Wu</h4>
                
                    <h5 class="sidebar-profile-bio"><p>author.bio</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="Home"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="Kategorien"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Kategorien</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="Tags"
                        >
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="Archiv"
                        >
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archiv</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                            title="Suche"
                        >
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Suche</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="Über"
                        >
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Über</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/mapleaph" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://twitter.com/mapleaph" target="_blank" rel="noopener" title="Twitter">
                    
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/mapleaph@gmail.com"
                            title="E-Mail"
                        >
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">E-Mail</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Setting up Redmine
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2015-11-21T22:16:41+08:00">
	
		    21 11月 2015
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Techniques/">Techniques</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h2 id="安装-Ruby-on-Rails"><a href="#安装-Ruby-on-Rails" class="headerlink" title="安装 Ruby on Rails"></a>安装 Ruby on Rails</h2><h3 id="安装-RVM"><a href="#安装-RVM" class="headerlink" title="安装 RVM"></a>安装 RVM</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># for single user, it will be installed under ~/.rvm</span></span><br><span class="line">$ curl -L get.rvm.io | bash -s stable</span><br><span class="line"><span class="comment"># for all users, it will be installed under /usr/local/rvm</span></span><br><span class="line">$ sudo curl -L get.vm.io | bash -s stable</span><br></pre></td></tr></table></figure>
<h3 id="安装-Ruby"><a href="#安装-Ruby" class="headerlink" title="安装 Ruby"></a>安装 Ruby</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ rvm install ruby</span><br><span class="line"><span class="comment"># check the ruby version</span></span><br><span class="line">$ ruby -v</span><br></pre></td></tr></table></figure>
<h3 id="安装-Rails"><a href="#安装-Rails" class="headerlink" title="安装 Rails"></a>安装 Rails</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># list all the download sources</span></span><br><span class="line">$ gem <span class="built_in">source</span> -l</span><br><span class="line"><span class="comment"># remove the origin sources</span></span><br><span class="line">$ gem <span class="built_in">source</span> -r https://rubygems.org/</span><br><span class="line">$ gem <span class="built_in">source</span> -a https://ruby.taobao.org/</span><br><span class="line">$ gem install rails</span><br></pre></td></tr></table></figure>
<h2 id="安装-Apache2"><a href="#安装-Apache2" class="headerlink" title="安装 Apache2"></a>安装 Apache2</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install apache2</span><br></pre></td></tr></table></figure>
<h2 id="安装-MySQL-PhpMyAdmin"><a href="#安装-MySQL-PhpMyAdmin" class="headerlink" title="安装 MySQL, PhpMyAdmin"></a>安装 MySQL, PhpMyAdmin</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install mysql-client mysql-server phpmyadmin</span><br></pre></td></tr></table></figure>
<h2 id="安装-PHP"><a href="#安装-PHP" class="headerlink" title="安装 PHP"></a>安装 PHP</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install libapache2-mod-php5</span><br></pre></td></tr></table></figure>
<h2 id="安装-Redmine"><a href="#安装-Redmine" class="headerlink" title="安装 Redmine"></a>安装 Redmine</h2><p>Download the source from www.redmine.org and extract the file to /var/www/html/redmine.<br><strong>Make sure that the redmine directory belongs to group www-data.</strong><br><strong>The own of the redmine directory should in the group of www-data.</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html</span><br><span class="line">$ sudo chown -R www-data:www-data redmine</span><br><span class="line">$ <span class="built_in">cd</span> redmine</span><br><span class="line">$ sudo chmod -R 775 files <span class="built_in">log</span> tmp public/plugin_assets</span><br><span class="line"><span class="comment"># if you set the permission to 755 according to the official doc,</span></span><br><span class="line"><span class="comment"># you will not install the plugin successfully.</span></span><br></pre></td></tr></table></figure>
<h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE redmine CHARACTER SET utf8;</span><br><span class="line">CREATE USER &apos;redmine&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;&lt;my_password&gt;&apos;;</span><br><span class="line">GRANT ALL PRIVILEGES ON redmine.* TO &apos;redmine&apos;@&apos;localhost&apos;;</span><br></pre></td></tr></table></figure>
<h3 id="数据库连接配置"><a href="#数据库连接配置" class="headerlink" title="数据库连接配置"></a>数据库连接配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html/redmine/config</span><br><span class="line">$ copy database.yml.example database.yml</span><br><span class="line">$ vim database.yml</span><br><span class="line"></span><br><span class="line">production:</span><br><span class="line">  adapter: mysql2</span><br><span class="line">  database: redmine</span><br><span class="line">  host: localhost</span><br><span class="line">  username: redmine</span><br><span class="line">  password: &lt;my_password&gt;</span><br></pre></td></tr></table></figure>
<h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html/redmine</span><br><span class="line">$ gem install bundler</span><br><span class="line">$ bundle install --without development <span class="built_in">test</span></span><br><span class="line"><span class="comment"># during the process, you may be prompted to install Rmagick</span></span><br></pre></td></tr></table></figure>
<h3 id="生成-session-secret-key"><a href="#生成-session-secret-key" class="headerlink" title="生成 session secret key"></a>生成 session secret key</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html/redmine</span><br><span class="line">$ bundle <span class="built_in">exec</span> rake generate_secret_token</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">$ rake secret</span><br><span class="line"><span class="comment"># then we should add that key to the /etc/profile file like this</span></span><br><span class="line"><span class="built_in">export</span> SECRET_KEY_BASE=asdf12320890asd09f23rlkuf09da09sdfklk324</span><br></pre></td></tr></table></figure>
<h3 id="初始化数据库"><a href="#初始化数据库" class="headerlink" title="初始化数据库"></a>初始化数据库</h3><p><strong>该过程可以在你删除了数据库中的表之后新建数据库用</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html/redmine</span><br><span class="line">$ RAILS_ENV=production bundle <span class="built_in">exec</span> rake db:migrate</span><br><span class="line">$ RAILS_ENV=production bundle <span class="built_in">exec</span> rake redmine:load_default_data</span><br></pre></td></tr></table></figure>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html/redmine</span><br><span class="line">$ bundle <span class="built_in">exec</span> rails server webrick -e production [-b &lt;ip&gt;] [-d]</span><br><span class="line"><span class="comment"># the -b option change the default address from localhost:3000</span></span><br><span class="line"><span class="comment"># to &lt;ip&gt;:3000</span></span><br><span class="line"><span class="comment"># the -d option runs the server as a daemon.</span></span><br></pre></td></tr></table></figure>
<h2 id="建立-Apache2-和-Redmine-的连接"><a href="#建立-Apache2-和-Redmine-的连接" class="headerlink" title="建立 Apache2 和 Redmine 的连接"></a>建立 Apache2 和 Redmine 的连接</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ gem install passenger</span><br><span class="line">$ passenger-install-apache2-module</span><br><span class="line"><span class="comment"># then the install process will guide you through.</span></span><br><span class="line"><span class="comment"># during the process, you will be asked to add code like the following to /etc/apache2/apache2.conf</span></span><br><span class="line">LoadModule passenger_module /usr/<span class="built_in">local</span>/rvm/gems/ruby-2.2.1/gems/passenger-5.0.21/buildout/apache2/mod_passenger.so</span><br><span class="line">&lt;IfModule mod_passenger.c&gt;</span><br><span class="line">        PassengerRoot /usr/<span class="built_in">local</span>/rvm/gems/ruby-2.2.1/gems/passenger-5.0.21</span><br><span class="line">        PassengerDefaultRuby /usr/<span class="built_in">local</span>/rvm/gems/ruby-2.2.1/wrappers/ruby</span><br><span class="line">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure>
<h3 id="建立站点配置"><a href="#建立站点配置" class="headerlink" title="建立站点配置"></a>建立站点配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/apache2/apache2.conf</span><br><span class="line"><span class="comment">#add 'ServerName localhost'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/apache2/sites-available/000-default.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># the default port is for redmine</span></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">        DocumentRoot /var/www/html/redmine/public</span><br><span class="line">        &lt;Directory /var/www/html/redmine/public&gt;</span><br><span class="line">                AllowOverride All</span><br><span class="line">                Options -MultiViews</span><br><span class="line">        &lt;/Directory&gt;</span><br><span class="line">        RailsEnv production</span><br><span class="line">        RailsBaseURI /redmine</span><br><span class="line">        ErrorLog <span class="variable">$&#123;APACHE_LOG_DIR&#125;</span>/error.log</span><br><span class="line">        CustomLog <span class="variable">$&#123;APACHE_LOG_DIR&#125;</span>/access.log combined</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">Listen 3000 <span class="comment"># we should listen to port 3000, or we cannot connect to it</span></span><br><span class="line"><span class="comment"># this is for the original apache site</span></span><br><span class="line">&lt;VirtualHost *:3000&gt;</span><br><span class="line">        DocumentRoot /var/www/html/</span><br><span class="line">        ErrorLog <span class="variable">$&#123;APACHE_LOG_DIR&#125;</span>/error.log</span><br><span class="line">        CustomLog <span class="variable">$&#123;APACHE_LOG_DIR&#125;</span>/access.log combined</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<h2 id="配置-Redmine-Mail-功能"><a href="#配置-Redmine-Mail-功能" class="headerlink" title="配置 Redmine Mail 功能"></a>配置 Redmine Mail 功能</h2><ol>
<li>申请邮箱</li>
<li><p>编辑配置文件</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html/redmine/config</span><br><span class="line">$ copy configuration.yml.example configuration.yml</span><br><span class="line">$ vim configuration.yml</span><br><span class="line"><span class="comment"># add the following to the last section of the file    </span></span><br><span class="line"><span class="comment"># be careful that this configuration cannot accept tab, we should all use spaces instead.</span></span><br><span class="line">production:</span><br><span class="line">  email_delivery:</span><br><span class="line">    delivery_method: :smtp</span><br><span class="line">    smtp_settings:</span><br><span class="line">      address: <span class="string">"smtp.sohu.com"</span></span><br><span class="line">      port: 25</span><br><span class="line">    <span class="comment"># if the site supports ssl access, then we should disable the port 25</span></span><br><span class="line">    <span class="comment"># then uncomment the following three lines.</span></span><br><span class="line">    <span class="comment"># tls: true</span></span><br><span class="line">    <span class="comment"># enable_starttls_auto: true</span></span><br><span class="line">    <span class="comment"># port: 587</span></span><br><span class="line">      domain: <span class="string">"smtp.sohu.com"</span></span><br><span class="line">      authentication: :login</span><br><span class="line">      user_name: <span class="string">"lhserver2011@sohu.com"</span></span><br><span class="line">      password: 123456 <span class="comment"># password don't quoted</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="建立-Redmine-同-Git-的连接"><a href="#建立-Redmine-同-Git-的连接" class="headerlink" title="建立 Redmine 同 Git 的连接"></a>建立 Redmine 同 Git 的连接</h2><p>假设 git 的某个工程存放在 /home/git/repositories/xyz.git，那么在 Redmine 中建立工程的版本库时，就要写这个绝对路径。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将 www-data 加入到 git 组中</span></span><br><span class="line">$ sudo adduser www-data git</span><br><span class="line"><span class="comment"># 更正 xyz.git 的权限为 755</span></span><br></pre></td></tr></table></figure>
<h2 id="添加-DMSF-插件"><a href="#添加-DMSF-插件" class="headerlink" title="添加 DMSF 插件"></a>添加 DMSF 插件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/www/html/redmine</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/danmunn/redmine_dmsf.git plugins/redmine_dmsf</span><br><span class="line">$ bundle <span class="built_in">exec</span> rake redmine:plugins:migrate RAILS_ENV=<span class="string">"production"</span></span><br><span class="line">$ sudo service apache2 restart</span><br><span class="line"><span class="comment"># then in the redmine project page, you should manually check the box of DMSF</span></span><br></pre></td></tr></table></figure>
<h2 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tail -f /var/<span class="built_in">log</span>/apache2/error.log</span><br></pre></td></tr></table></figure>

            

        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/11/21/Things-Need-to-Know-about-Git/" data-tooltip="Git" aria-label="FRÜHER: Git">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">FRÜHER</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/09/03/Setting-up-a-New-Blog/" data-tooltip="Setting up a New Blog" aria-label="NÄCHSTER: Setting up a New Blog">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NÄCHSTER</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://yoursite.com/2015/11/21/Setting-up-Redmine/" title="Teilen auf Twitter">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=http://yoursite.com/2015/11/21/Setting-up-Redmine/" title="Share on Weibo">
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 Michael Wu. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/11/21/Things-Need-to-Know-about-Git/" data-tooltip="Git" aria-label="FRÜHER: Git">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">FRÜHER</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/09/03/Setting-up-a-New-Blog/" data-tooltip="Setting up a New Blog" aria-label="NÄCHSTER: Setting up a New Blog">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NÄCHSTER</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://yoursite.com/2015/11/21/Setting-up-Redmine/" title="Teilen auf Twitter">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=http://yoursite.com/2015/11/21/Setting-up-Redmine/" title="Share on Weibo">
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <i id="btn-close-shareoptions" class="fa fa-times"></i>
    <ul class="share-options">
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://yoursite.com/2015/11/21/Setting-up-Redmine/">
                    <i class="fab fa-twitter" aria-hidden="true"></i><span>Teilen auf Twitter</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="http://service.weibo.com/share/share.php?&amp;title=http://yoursite.com/2015/11/21/Setting-up-Redmine/">
                    <i class="fab fa-weibo" aria-hidden="true"></i><span>Share on Weibo</span>
                </a>
            </li>
        
    </ul>
</div>

            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.jpg" alt="Bild des Autors"/>
        
            <h4 id="about-card-name">Michael Wu</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Tianjin, China
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.fancybox.js"></script>
<script src="/assets/js/thumbs.js"></script>
<script src="/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->

    



    </body>
</html>
